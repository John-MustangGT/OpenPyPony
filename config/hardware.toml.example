# OpenPonyLogger Hardware Configuration
# Copy to hardware.toml and customize for your build

# =============================================================================
# Device Information
# =============================================================================

[device]
name = "OpenPonyLogger-01"
build_date = "2024-12-23"
hardware_version = "1.0"
notes = "Pico 2W + LSM6DSOX + LIS3MDL + PA1010D"

# =============================================================================
# Accelerometer Configuration
# =============================================================================

[sensors.accelerometer]
enabled = true

# Sensor type: LIS3DH, LSM6DSOX, ICM20948, MPU6050
type = "LSM6DSOX"

# I2C address (hex)
# LIS3DH: 0x18 or 0x19
# LSM6DSOX: 0x6A or 0x6B
# ICM20948: 0x68 or 0x69
# MPU6050: 0x68 or 0x69
address = 0x6A

# Range in g: 2, 4, 8, 16
# LIS3DH: 2, 4, 8, 16
# LSM6DSOX: 2, 4, 8, 16
# ICM20948: 2, 4, 8, 16
# MPU6050: 2, 4, 8, 16
range = 4

# Sample rate in Hz
# LIS3DH: 10, 25, 50, 100, 200, 400
# LSM6DSOX: 12, 26, 52, 104, 208, 416, 833
# ICM20948: 17, 34, 68, 136, 273, 562
# MPU6050: 5, 10, 21, 44, 94, 184, 260
sample_rate = 104

# =============================================================================
# Gyroscope Configuration
# =============================================================================

[sensors.gyroscope]
enabled = true

# Sensor type (usually same as accelerometer for IMUs)
# LSM6DSOX, ICM20948, MPU6050
# Leave blank to auto-detect from accelerometer
type = ""

# Range in degrees/second
# LSM6DSOX: 125, 250, 500, 1000, 2000
# ICM20948: 250, 500, 1000, 2000
# MPU6050: 250, 500, 1000, 2000
range = 250

# Sample rate in Hz (usually same as accelerometer)
sample_rate = 104

# =============================================================================
# Magnetometer Configuration
# =============================================================================

[sensors.magnetometer]
enabled = true

# Sensor type: LIS3MDL, ICM20948
type = "LIS3MDL"

# I2C address (hex)
# LIS3MDL: 0x1C or 0x1E
# ICM20948: Built into chip (use accelerometer address)
address = 0x1C

# Range in Gauss
# LIS3MDL: 4, 8, 12, 16
# ICM20948: Auto (±4900 µT)
range = 4

# Sample rate in Hz
# LIS3MDL: 0.625, 1.25, 2.5, 5, 10, 20, 40, 80
# ICM20948: Auto (100 Hz)
sample_rate = 80

# Calibration offsets (micro-Tesla)
# Run calibration routine to determine these
offset_x = 0.0
offset_y = 0.0
offset_z = 0.0

# =============================================================================
# GPS Configuration
# =============================================================================

[gps]
enabled = true

# GPS type: ATGM336H, PA1010D
type = "PA1010D"

# Interface: uart_gps (UART) or i2c (I2C, PA1010D only)
interface = "i2c"

# I2C address (PA1010D on I2C only)
address = 0x10

# Update rate in milliseconds (1000 = 1Hz)
update_rate = 1000

# NMEA sentence configuration (PMTK314 command)
# Format: GLL,RMC,VTG,GGA,GSA,GSV,0,0,0,0,0,0,0,MCHN,0,0,0,0,ZDA
# Default enables: RMC, GGA, GSA, GSV
sentences = "0,1,0,1,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0"

# =============================================================================
# I2C Interface Configuration
# =============================================================================

# Primary I2C bus (STEMMA QT or custom pins)
[interfaces.i2c_primary]
enabled = true
use_stemma = true  # Use GP4/GP5 STEMMA pins

# If use_stemma = false, specify custom pins:
# scl = "GP1"
# sda = "GP0"
frequency = 100000

# Secondary I2C bus (optional)
[interfaces.i2c_secondary]
enabled = false
scl = "GP3"
sda = "GP2"
frequency = 100000

# =============================================================================
# UART Interfaces
# =============================================================================

# GPS UART (for ATGM336H or PA1010D in UART mode)
[interfaces.uart_gps]
enabled = true
tx = "GP4"
rx = "GP5"
baudrate = 9600
timeout = 10

# ESP-01S UART (for WiFi/Bluetooth radio)
[interfaces.uart_esp]
enabled = true
tx = "GP0"
rx = "GP1"
baudrate = 115200
timeout = 1

# =============================================================================
# SPI Interface
# =============================================================================

[interfaces.spi]
enabled = true
sck = "GP18"
mosi = "GP19"
miso = "GP16"

# =============================================================================
# SD Card
# =============================================================================

[sdcard]
enabled = true
cs_pin = "GP17"
mount_point = "/sd"

# =============================================================================
# OLED Display
# =============================================================================

[display]
enabled = true
type = "SSD1306"
width = 128
height = 64
address = 0x3C

# =============================================================================
# NeoPixel (WS2812)
# =============================================================================

[neopixel]
enabled = true
pin = "GP28"
num_pixels = 7  # 7 for NeoPixel Jewel
brightness = 0.2
auto_write = true

# =============================================================================
# Heartbeat LED
# =============================================================================

[heartbeat]
enabled = true
pin = "GP25"  # Built-in LED on Pico

# =============================================================================
# Watchdog Timer
# =============================================================================

[watchdog]
enabled = true
timeout = 8.0  # seconds

# =============================================================================
# RTC (Real-Time Clock)
# =============================================================================

[rtc]
enabled = true
type = "PCF8523"
address = 0x68

# =============================================================================
# ESP-01S Radio Module
# =============================================================================

[radio]
enabled = false
type = "ESP-01S"
reset_pin = "GP22"
enable_pin = "GP21"

# =============================================================================
# Alternative Sensor Configurations (Examples)
# =============================================================================

# Example 1: LIS3DH + ATGM336H (Original OpenPonyLogger)
# [sensors.accelerometer]
# type = "LIS3DH"
# address = 0x18
# range = 2
# sample_rate = 100
#
# [gps]
# type = "ATGM336H"
# interface = "uart_gps"

# Example 2: ICM-20948 9DOF IMU (All sensors in one chip)
# [sensors.accelerometer]
# type = "ICM20948"
# address = 0x69
# range = 4
# sample_rate = 100
#
# [sensors.gyroscope]
# enabled = true
# range = 500
#
# [sensors.magnetometer]
# enabled = true
# type = "ICM20948"  # Built-in AK09916

# Example 3: MPU-6050/GY-521 (6DOF IMU)
# [sensors.accelerometer]
# type = "MPU6050"
# address = 0x68
# range = 4
# sample_rate = 100
#
# [sensors.gyroscope]
# enabled = true
# type = "MPU6050"
# range = 500

# Example 4: LSM6DSOX + LIS3MDL (6DOF IMU + separate magnetometer)
# [sensors.accelerometer]
# type = "LSM6DSOX"
# address = 0x6A
# range = 4
# sample_rate = 104
#
# [sensors.gyroscope]
# enabled = true
# range = 250
#
# [sensors.magnetometer]
# enabled = true
# type = "LIS3MDL"
# address = 0x1C
# range = 4
# sample_rate = 80
